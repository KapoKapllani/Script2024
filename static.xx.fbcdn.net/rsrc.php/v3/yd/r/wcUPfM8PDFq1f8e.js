;/*FB_PKG_DELIM*/

__d("PageletEventsHelper",["Arbiter","PageletEventConstsJS"],(function(a,b,c,d,e,f,g){var h="BigPipe/init",i="MRenderingScheduler/init",j="pagelet_event",k="phase_begin",l={},m=[],n=!1;function o(){return{pagelets:{},categories:{},phase_start:{},display_resources:{},all_resources:{}}}function p(a,b,c,d){l[d]==void 0&&(l[d]=o()),l[d].pagelets[b]==void 0&&(l[d].pagelets[b]={}),l[d].pagelets[b][a]=c}function q(a){a.subscribe(j,function(a,b){var d=b.event,e=b.ts;a=b.id;var f=b.lid,g=b.phase,h=b.categories,i=b.allResources;b=b.displayResources;p(d,a,e,f);var j=l[f],k=j.pagelets[a];d===c("PageletEventConstsJS").ARRIVE_END&&(k.phase=g,j.all_resources[a]=i,j.display_resources[a]=b);(d===c("PageletEventConstsJS").ONLOAD_END||d===c("PageletEventConstsJS").DISPLAY_END)&&h&&h.forEach(function(a){j.categories[a]==void 0&&(j.categories[a]={}),j.categories[a][d]=e});for(k=0,g=m.length;k<g;k++)m[k](a,d,e,f)}),a.subscribe(k,function(a,b){l[b.lid].phase_start[b.phase]=b.ts})}function a(){if(n)return;c("Arbiter").subscribe(h,function(a,b){a=b.lid;b=b.arbiter;l[a]=o();q(b)});c("Arbiter").subscribe(i,function(a,b){a=b.lid;b=b.arbiter;l[a]=o();q(b)});n=!0}function b(a){return l[a]?JSON.parse(JSON.stringify(l[a])):null}function d(a){m.push(a);return{remove:function(){m.splice(m.indexOf(a),1)}}}g.init=a;g.getMetrics=b;g.subscribeToPageletEvents=d}),98);
__d("MobileBigPipeStratcomProxy",["PageletEventConstsJS","PageletEventsHelper","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(){d("PageletEventsHelper").init(),d("PageletEventsHelper").subscribeToPageletEvents(h)}function h(a,b,d,e){b===c("PageletEventConstsJS").DISPLAY_END&&c("Stratcom").invoke("m:schedulable:loaded",null,{name:a,lid:e})}g.init=a;g._onPageletEvent=h}),98);
__d("MCoreDeferred",["MPageControllerImpl","MPageFetcherImpl"],(function(a,b,c,d,e,f){b("MPageControllerImpl"),b("MPageFetcherImpl")}),null);
__d("MFullPageLoadState",["NavigationMetrics","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";var h="pre-tti",i=c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,a);c("Stratcom").listen("m:page:loading",null,function(){h==="pre-tti"?h="interrupted-pre-tti":h==="post-tti"?h="interrupted-post-tti":h==="post-dd"&&(h="interrupted-post-dd"),i&&i.remove(),i=null,c("Stratcom").removeCurrentListener()});function a(a,b){if(a!==c("NavigationMetrics").getFullPageLoadLid())return;b.event==="tti"&&h==="pre-tti"?h="post-tti":b.event==="all_pagelets_displayed"&&(h==="pre-tti"||h==="post-tti")?h="post-dd":b.event==="e2e"&&h!=="post-e2e"&&(h="post-e2e",i&&i.remove(),i=null)}function b(){return h}g.get=b}),98);
__d("MAsyncNavigationTrackerTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:MAsyncNavigationTrackerLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setEventSpecificDetails=function(a){this.$1.event_specific_details=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setNavigationID=function(a){this.$1.navigation_id=a;return this};c.setPath=function(a){this.$1.path=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setSourcePath=function(a){this.$1.source_path=a;return this};c.setSourceTopView=function(a){this.$1.source_top_view=a;return this};c.setTimeSinceNavStart=function(a){this.$1.time_since_nav_start=a;return this};c.setTimeSinceSessionStart=function(a){this.$1.time_since_session_start=a;return this};return a}();c={event_name:!0,event_specific_details:!0,navigation_id:!0,path:!0,session_id:!0,source_path:!0,source_top_view:!0,time_since_nav_start:!0,time_since_session_start:!0};f["default"]=a}),66);
__d("MPageNavigationTracking",["EventListener","JavelinHistory","MAsyncNavigationTrackerTypedLogger","MFullPageLoadState","Stratcom","URI","performanceAbsoluteNow","performanceNavigationStart","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("uuidv4")(),k=0,l=null;function a(){var a;(a=c("Stratcom")).listen("m:page:load-start",null,n);a.listen("m:page:render:complete",null,r);a.listen("m:history:change",null,o);a.listen("m:page:error",null,q);a.listen(["go","gouri"],null,u);c("EventListener").listen(window,"blur",s);c("EventListener").listen(window,"beforeunload",t)}function m(){l=null}function n(a){a=a.getData();var b=a.targetPath,e=a.previousPath,f=a.previousTopView,g=a.prefetchState;g=g===void 0?null:g;var i=a.cacheType;i=i===void 0?null:i;a=a.isFromHistory;a=a===void 0?!1:a;b=w(b);e=w(e);f=f;if(b==null)return;p(b,a);var j=++k;l={id:j,path:b,sourcePath:e,sourceTopView:f,startTimeAbsolute:(h||(h=c("performanceAbsoluteNow")))(),prefetchState:g,cacheType:i,navigationType:a?"history":null};v("page_load_start",!1,{fullPageLoadState:d("MFullPageLoadState").get()})}function o(a){var b=w(a.getData().path);if(l&&l.path!==b){a=a.getData().trigger===c("JavelinHistory").TRIGGERS.POPSTATE;p(b,a)}}function p(a,b){if(!l)return;v("page_load_abandoned",!1,{abandonedToPath:a,isFromBackPress:b.toString()});m()}function q(a){if(!l)return;a=a.getData();v("page_load_failed",!1,{errorCode:(a==null?"":a).toString()});m()}function r(a){a=a.getData();a=a.path;a=w(a);if(a==null||l==null||l.path!=a)return;v("page_render_complete");m()}function s(){if(!l)return;v("browser_moved_to_background",!0);m()}function t(){v("session_unload",!0)}function u(a){a=a.getData();a=a.uri;v("session_navigate_away",!0,{uri:a});m()}function v(a,b,d){b===void 0&&(b=!1);if(l==null)return;d=d||{};d.cacheType=l.cacheType;d.navigationType=l.navigationType;d.prefetchState=l.prefetchState;var e=(h||(h=c("performanceAbsoluteNow")))();a=new(c("MAsyncNavigationTrackerTypedLogger"))().setSessionID(j).setNavigationID(l.id.toString()).setPath(l.path).setSourcePath(l.sourcePath).setSourceTopView(l.sourceTopView).setEventName(a).setTimeSinceNavStart(e-l.startTimeAbsolute).setEventSpecificDetails(d).setTimeSinceSessionStart(e-c("performanceNavigationStart")());b?a.logImmediately():a.log()}function w(a){return!a?null:new(i||(i=c("URI")))(a).getQualifiedURI().toString()}g.init=a}),98);
__d("onSyncTTI",["Arbiter","BigPipe","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("Arbiter").subscribeOnce(c("BigPipe").Events.tti,function(){c("Stratcom").invoke("m:root:render")})}g.run=a}),98);
__d("AddressBar",["MViewport","ge","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=0;function g(){a=0;if(b("MViewport").getScrollTop()<60){var c=h()*-1;b("MViewport").scrollToHeader(c)}}function h(){var a=b("ge")("header-notices");return a?a.offsetHeight:0}function c(){navigator.userAgent.indexOf("iPad")===-1&&window.addEventListener("load",function a(){window.removeEventListener("load",a,!1),g()},!1)}f.setupLoadListener=c}),null);
__d("ViewportDimensions",["Bootloader","MViewport","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h={_initialized:!1,_innerWidth:0,_innerHeight:0,_outerWidth:0,_outerHeight:0,_wasCookieSet:!1,init:function(){!h._initialized&&!c("isInIframe")()&&!d("MViewport").isLandscape()&&(h._initialized=!0,h._innerWidth=window.innerWidth,h._innerHeight=window.innerHeight,h._outerWidth=window.outerWidth,h._outerHeight=window.outerHeight)},setCookie:function(a){if(h._wasCookieSet){a&&a();return}c("Bootloader").loadModules(["Cookie"],function(b){if(!h._initialized)return;h._wasCookieSet||(h._wasCookieSet=!0,b.set("vpd",[h.getScreenDimension(h._innerHeight,h._outerHeight,screen.height,.87),h.getScreenDimension(h._innerWidth,h._outerWidth,screen.width,1),window.devicePixelRatio].join("x")));a&&a()},"ViewportDimensions")},getScreenDimension:function(a,b,c,d){var e=0;b===0?e=a:a===0?e=b:e=Math.min(a,b);a=Math.max(1,window.devicePixelRatio);return Math.floor(a*(e===0?Math.floor(c*d):e))}};a=h;g["default"]=a}),98);
__d("MHome",["FBLogger","MHistory","MURI","Stratcom"],(function(a,b,c,d,e,f,g){function a(){c("Stratcom").listen("m:page:unload",null,function(a){c("Stratcom").invoke("m:homepage:unload"),c("Stratcom").removeCurrentListener()}),c("Stratcom").invoke("m:homepage:load")}var h="home.html";d="home2cd9.html?layoutonly";function b(a){a=a;a||(a=c("MHistory").getPath());if(!a)return!1;try{var b=new(c("MURI"))(a).normalize();b=b.getPath()}catch(d){b=null,c("FBLogger")("mweb").catching(d).warn("Unable to determine if isHome, invalid path: %s",a.toString())}return b!=null&&(b==="/"||b===h)&&!c("MHistory").hasSoftState()}g.init=a;g.HOME_PATH=h;g.HOME_LAYOUT_PATH=d;g.isHome=b}),98);
__d("DataAttributeUtils",["DataStore"],(function(a,b,c,d,e,f){var g=[];function h(a,b){a=a;while(a){if(b(a))return a;a=a.parentNode}return null}function i(a,b){a=h(a,function(a){return a instanceof Element&&!!a.getAttribute(b)});return a instanceof Element?a:null}var j={LEGACY_CLICK_TRACKING_ATTRIBUTE:"data-ft",CLICK_TRACKING_DATASTORE_KEY:"data-ft",ENABLE_STORE_CLICK_TRACKING:"data-fte",IMPRESSION_TRACKING_CONFIG_ATTRIBUTE:"data-xt-vimp",IMPRESSION_TRACKING_CONFIG_DATASTORE_KEY:"data-xt-vimp",REMOVE_LEGACY_TRACKING:"data-ftr",getDataAttribute:function(a,b){return k[b]?k[b](a):a.getAttribute(b)},setDataAttribute:function(a,b,c){return l[b]?l[b](a,c):a.setAttribute(b,c)},getDataFt:function(a){if(a.getAttribute(j.ENABLE_STORE_CLICK_TRACKING)){var c=b("DataStore").get(a,j.CLICK_TRACKING_DATASTORE_KEY);c||(c=j.moveClickTrackingToDataStore(a,a.getAttribute(j.REMOVE_LEGACY_TRACKING)));return c}return a.getAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE)},setDataFt:function(a,c){if(a.getAttribute(j.ENABLE_STORE_CLICK_TRACKING)){b("DataStore").set(a,j.CLICK_TRACKING_DATASTORE_KEY,c);return}a.setAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE,c)},moveXTVimp:function(a){j.moveAttributeToDataStore(a,j.IMPRESSION_TRACKING_CONFIG_ATTRIBUTE,j.IMPRESSION_TRACKING_CONFIG_DATASTORE_KEY),g.push(a.id)},getXTrackableElements:function(){var a=g.map(function(a){return document.getElementById(a)}).filter(function(a){return!!a}),b=document.querySelectorAll("[data-xt-vimp]");for(var c=0;c<b.length;c++)a.push(b[c]);return a},getDataAttributeGeneric:function(a,c,d){d=b("DataStore").get(a,d);return d!==void 0?d:a.getAttribute(c)},moveAttributeToDataStore:function(a,c,d){var e=a.getAttribute(c);e&&(b("DataStore").set(a,d,e),a.removeAttribute(c))},moveClickTrackingToDataStore:function(a,c){var d=a.getAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE);d&&(b("DataStore").set(a,j.CLICK_TRACKING_DATASTORE_KEY,d),c&&a.removeAttribute(j.LEGACY_CLICK_TRACKING_ATTRIBUTE));return d},getClickTrackingParent:function(a){a=i(a,j.LEGACY_CLICK_TRACKING_ATTRIBUTE)||i(a,j.ENABLE_STORE_CLICK_TRACKING);return a},getClickTrackingElements:function(a){return a.querySelectorAll("["+j.LEGACY_CLICK_TRACKING_ATTRIBUTE+"], ["+j.ENABLE_STORE_CLICK_TRACKING+"]")},getParentByAttributeOrDataStoreKey:function(a,c,d){while(a&&(!a.getAttribute||!a.getAttribute(c))&&b("DataStore").get(a,d)===void 0)a=a.parentNode;return a}},k={"data-ft":j.getDataFt,"data-xt-vimp":function(a){return j.getDataAttributeGeneric(a,"data-xt-vimp","data-xt-vimp")},"data-ad":function(a){return j.getDataAttributeGeneric(a,"data-ad","data-ad")},"data-xt":function(a){return j.getDataAttributeGeneric(a,"data-xt","data-xt")}},l={"data-ft":j.setDataFt,"data-xt":function(a,c){b("DataStore").set(a,"data-xt",c)}};e.exports=j}),null);
__d("MPopoverVisiblityTracker",["MHistory"],(function(a,b,c,d,e,f,g){"use strict";function a(){}b=function(){return c("MHistory").hasSoftState()};g.init=a;g.isPopoverOpen=b}),98);
__d("VisibilityTrackingHelper",["MPopoverVisiblityTracker","MViewport","Stratcom","StratcomManager","gkx"],(function(a,b,c,d,e,f,g){function a(a,b){d("StratcomManager").enableDispatch(document,"scroll");return[c("Stratcom").listen("m:root:render",null,a),c("Stratcom").listen("scroll",null,a),c("Stratcom").listen("MScrollArea:scrollend",null,a)]}function b(){return{width:d("MViewport").getWidth(),height:d("MViewport").getHeight()}}function e(){var a=c("gkx")("820050");if(a&&d("MPopoverVisiblityTracker").isPopoverOpen())return!0;a=document.getElementById("MPopupControl");return!!a}g.getEventListeners=a;g.getViewportInfo=b;g.isSnippetFlyoutVisible=e}),98);
__d("MViewportTracking",["invariant","DOM","DataAttributeUtils","FBJSON","MHome","MPopoverVisiblityTracker","MViewport","NavigationMetrics","Stratcom","Style","Vector","Visibility","VisibilityTrackingHelper","gkx","onAfterTTI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";var i=97,j=200,k=new Map();a=function(){function a(){var a=this;this.$2=[];this.debugConsole=!1;this.activeStories={};this.cachedViewportHeight=0;this.discardVPVDIntervalThreshold=9e4;this.vpvdMinDuration=250;this.isLoose=!1;this.isTimeTrackingEnabled=!1;this.latestTimeTrackingTimestamp=0;this.maxScrollPosition=0;this.minSizeToBeVisible=0;this.readStoryIDs={};this.relaxedMinSize=!1;this.trackingHooks=!1;this.vpvdDebug=!1;this.vpvDebug=!1;this.enableAdsAllocationIntegrityLogging=!1;this.queueLogAction=function(){a.isLoose?a.$3||(a.$3=c("setTimeoutAcrossTransitions")(function(){a.maxScrollPosition=Math.max(a.maxScrollPosition,d("MViewport").getScrollTop()),a.startVpvTracking(),a.$3=null},100)):(window.clearTimeout(a.$1),a.$1=c("setTimeoutAcrossTransitions")(function(){a.startVpvTracking()},a.getTimeout()))}}var b=a.prototype;b.getDataFromConfig=function(a){h(0,2199)};b.getStoryID=function(a){h(0,2200)};b.getDataToLog=function(a){h(0,2201)};b.sendDataToLog=function(a){h(0,2202)};b.getTimeout=function(){h(0,2203)};b.getAllStories=function(){h(0,2204)};b.init=function(b){var e=this;this.isLoose=!!b.is_loose;this.relaxedMinSize=!!b.relaxed_min_size;this.vpvDebug=!!b.vpv_debug;this.isTimeTrackingEnabled=!1;this.vpvdMinDuration=b.vpvd_min_duration||250;var f=a.shouldRunTrackingAfterTTI();d("MPopoverVisiblityTracker").init();f||(this.cachedViewportHeight=d("MViewport").getHeight());this.getDataFromConfig(b);this.maxScrollPosition=0;this.readStoryIDs=this.getCachedReadStoryIDs()||{};this.$2=[c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)),c("Stratcom").listen("m:viewport:update-complete",null,function(){e.cachedViewportHeight=d("MViewport").getHeight()})];b.triggerOverride?this.$2=this.$2.concat(b.triggerOverride.map(function(a){var b=a[0];a=a[1];return c("Stratcom").listen(b,a,e.queueLogAction.bind(e))})):this.$2.push(c("Stratcom").listen("scroll",null,this.queueLogAction.bind(this)));if(this.isTimeTrackingEnabled){this.$2.push((b=c("Visibility")).addListener(b.VISIBLE,function(){return e.startVpvTracking()}));this.$2.push(b.addListener(b.HIDDEN,function(){return e.stopVpvTracking()}))}this.$2.push(c("Stratcom").listen("m:newsfeed:popup-visible",null,function(){e.stopVpvTracking()}),c("Stratcom").listen("m:newsfeed:popup-hidden",null,function(){e.startVpvTracking()}));f?c("onAfterTTI")(function(){e.startVpvTracking()},!1):(this.startVpvTracking(),c("NavigationMetrics").addRetroactiveListener(c("NavigationMetrics").Events.EVENT_OCCURRED,function(a,b){a=b.event;a==="tti"&&(e.startVpvTracking(),c("NavigationMetrics").removeCurrentListener())}))};b.getFBFeedLocation=function(){return-1};b.unitTestOnlyGetListeners=function(){return[].concat(this.$2)};b.getCachedReadStoryIDs=function(){return null};b.getMinSizeToBeVisible=function(a){if(!this.relaxedMinSize)return j;a="getBoundingClientRect"in a?a.getBoundingClientRect().height:c("Vector").getDim(a).y;return Math.min(j,a*.5)};b.startVpvTracking=function(){this.isTimeTrackingEnabled?this.startRecordingTimeTrackingData():this.fireEvent()};b.stopVpvTracking=function(){this.isTimeTrackingEnabled?this.stopRecordingTimeTrackingData():this.fireEvent()};b.fireEvent=function(){if(d("VisibilityTrackingHelper").isSnippetFlyoutVisible())return;var a=this.getAllStoriesInView();for(var b=0;b<a.length;b++){var e=a[b],f=this.getStoryID(e);if(!f||f in this.readStoryIDs)continue;this.readStoryIDs[f]=!0;this.sendDataToLog(this.getDataToLog(e));if(this.vpvDebug){f=d("DOM").scry(e,"div")[0];f&&c("Style").set(f,"background-color","#fffbe2")}this.markStoryRead(e);this.fireStoryVisibleHandlers(e)}};b.fireStoryVisibleHandlers=function(a){(k.get(a)||[]).forEach(function(a){return a()}),k["delete"](a)};b.markStoryRead=function(a){};b.getTimetrackingDataToLog=function(b){var e=d("DOM").scry(b.story,"*","data-is-cta").map(function(a){a=c("DataAttributeUtils").getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});this.cachedViewportHeight===0&&a.shouldRunTrackingAfterTTI()&&(this.cachedViewportHeight=d("MViewport").getHeight());return{evt:i,fbfeed_location:this.getFBFeedLocation(),story_height:b.story_height,viewport_height:this.cachedViewportHeight,vpvd_start_timestamp:b.evp_ts/1e3,vpvd_time_delta:Math.round(b.vpvd||0),cta_types:e}};b.recordTimeStoryWasInView=function(a){if(this.isTimeTrackingEnabled&&a.vpvd>=this.vpvdMinDuration){var b=this.getTimetrackingDataToLog(a);if(typeof b!=="string"){a=c("DataAttributeUtils").getDataFt(a.story);a&&(b=babelHelpers["extends"]({},b,d("FBJSON").parse(a,f.id)))}this.sendTimetrackingDataToLog(b)}};b.startRecordingTimeTrackingData=function(){this.$4(!1)};b.stopRecordingTimeTrackingData=function(){this.$4(!0)};b.$4=function(a){this.activeStories||(this.activeStories={});var b=Date.now();this.latestTimeTrackingTimestamp||(this.latestTimeTrackingTimestamp=b);var c=this.getAllStoriesInViewVpvd();this.updateVPVDurations(b);if(this.debugConsole){var d=Object.values(this.activeStories);d.length&&(console.table&&console.table(d))}d=this.updateActiveStories(c,b);this.debugConsole&&(d.length&&(console.table&&console.table(d)));this.recordVPVDurations(c,a);this.latestTimeTrackingTimestamp=a?0:b};b.updateVPVDurations=function(a){var b=a-this.latestTimeTrackingTimestamp;if(b>this.discardVPVDIntervalThreshold)return;b=a-this.latestTimeTrackingTimestamp;for(a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&(this.activeStories[a].vpvd+=b)};b.isVisible=function(a,b){for(var c=0;c<b.length;c++)if(this.getStoryID(b[c])===a)return!0;return!1};b.recordVPVDurations=function(a,b){this.recordVPVDurationsInternal(a,b)};b.recordVPVDurationsInternal=function(a,b){for(var c in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,c)&&((b||!this.isVisible(c,a))&&(this.recordTimeStoryWasInView(this.activeStories[c]),delete this.activeStories[c]))};b.updateActiveStories=function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=this.getStoryID(a[d]);if(!e)break;e in this.activeStories||(this.activeStories[e]={evp_ts:b,story:a[d],vpvd:0,story_height:a[d].offsetHeight},c.push(this.activeStories[e]));this.activeStories[e].ts=b}return c};b.getAllStoriesInView=function(a){a===void 0&&(a=!1);return this.getAllStoriesInViewInternal(a,this.isLoose)};b.getAllStoriesInViewVpvd=function(){return this.getAllStoriesInViewInternal(!1,!1)};b.getAllStoriesInViewInternal=function(a,b){a===void 0&&(a=!1);b===void 0&&(b=!0);var c=[],e=this.getAllStories(),f=d("MViewport").getScrollTop(),g=d("MViewport").getHeight(),h=g+this.maxScrollPosition-f;for(var i=0;i<e.length;i++){var j=e[i],k=this.getStoryBounds(f,j),l=k.top;k=k.bottom;if(!l&&!k)continue;var m=this.getMinSizeToBeVisible(j);if(!b&&l>g-m)break;m=!b&&l<=g-m&&k>=m||b&&l<h;a&&(k<0||l>g)&&(m=!1);m&&c.push(j)}return c};b.getStoryBounds=function(a,b){if("getBoundingClientRect"in b){var d=b.getBoundingClientRect();return{bottom:d.bottom,top:d.top}}else{d=c("Vector").getPos(b).y-a;return{top:d,bottom:d+c("Vector").getDim(b).y}}};b.cleanup=function(){this.$2.forEach(function(a){return a.remove()}),this.$2=[],k.clear()};b.onUnload=function(){this.stopVpvTracking(),this.cleanup()};b.sendTimetrackingDataToLog=function(a){this.sendDataToLog(a)};a.shouldRunTrackingAfterTTI=function(){return d("MHome").isHome(location.href)&&c("gkx")("7534")};a.addStoryVisibleHandler=function(a,b){k.set(a,[].concat(k.get(a)||[],[b]));return{remove:function(){k.set(a,(k.get(a)||[]).filter(function(a){return a!==b}))}}};return a}();g["default"]=a}),98);
__d("WebCommentVpvDurationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1842512");b=d("FalcoLoggerInternal").create("web_comment_vpv_duration",a);e=b;g["default"]=e}),98);
__d("MCommentViewportTracking",["DOM","DataStore","FBJSON","MParent","MViewportTracking","Stratcom","StratcomManager","WebCommentVpvDurationFalcoEvent","compactArray","gkx","onAfterTTI"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i={m_group_stories_container:"group",m_newsfeed_stream:"",m_news_feed_stream:"",m_story_permalink_view:"",structured_composer_async_container:"user",root:""};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.loadedReplies=function(){c("Stratcom").invoke("m:commentViewportTracking:loadedReplies")};b.loadedComments=function(){h&&h.isTimeTrackingEnabled&&h.startRecordingTimeTrackingData()};b.singleton=function(a){if(!h){a={triggerOverride:[["scroll",null],["m:commentViewportTracking:loadedReplies",null],["m:feed-ufi-flyout:comments-displayed",null],["m:ufi:live-comments:render",null],["m:ufi:live-comments:new-comment",null],["m:feed-ufi-flyout:reset",null],["m:page:render:complete",null]]};d("StratcomManager").enableDispatch(document,"scroll");h=new b();h.init(a);h.debugConsole;h.isTimeTrackingEnabled&&(c("MViewportTracking").shouldRunTrackingAfterTTI()?c("onAfterTTI")(function(){h instanceof b&&h.startRecordingTimeTrackingData()},!1):h.startRecordingTimeTrackingData());c("Stratcom").listen("m:page:unload",null,function(){h=null,c("Stratcom").removeCurrentListener()})}};b.registerFlyout=function(a,b){var c;h&&(h.debugConsole,h.streamRoot=a);i=babelHelpers["extends"]((c={},c[a.id]=b||"",c),i)};var e=b.prototype;e.getDataFromConfig=function(){this.debugConsole=c("gkx")("676811"),this.isTimeTrackingEnabled=!0,this.idle_timeout=5e3,this.min_duration_to_log=100,this.min_visible_size=200,this.relaxedMinSize=!0};e.__getRootNode=function(){this.streamRoot||(this.streamRoot=c("compactArray")(Object.keys(i).map(function(a){return document.getElementById(a)}))[0]||null);return this.streamRoot};e.__getStaticTemplateRootNode=function(){this.staticElementRoot||(this.staticElementRoot=document.getElementById("static_templates"));return this.staticElementRoot};e.getAllStories=function(){var a=this.__getRootNode();if(!a)return[];a=d("DOM").scry(this.__getRootNode(),"div","comment-body");return this.__getStaticTemplateRootNode()?a.concat(d("DOM").scry(this.__getStaticTemplateRootNode(),"div","comment-body")):a};e.getTimeout=function(){return this.min_duration_to_log};e.getDataToLog=function(a){return{}};e.getStoryID=function(a){var b=a.getAttribute("data-commentid");return!b?String(d("DataStore").get(a,"token"))||null:b};e.getContainerModule=function(){var a=this.__getRootNode();return!a||!(a.id in i)?"other":i[a.id]};e.getTimetrackingDataToLog=function(a){var b=a.story,c;try{var e=d("MParent").bySigil(a.story,"story-div")||d("MParent").bySigil(a.story,"m-feed-single-story");e&&(c=d("FBJSON").parse(e.getAttribute("data-ft"),f.id))}catch(a){}return{comment_id:this.getStoryID(b),duration_ms:Math.round(a.vpvd),container_module:this.getContainerModule(),mf_story_key:c?c.mf_story_key||c.top_level_post_id:null}};e.sendDataToLog=function(a){a.comment_id&&(this.debugConsole,c("WebCommentVpvDurationFalcoEvent").log(function(){return{json_data:JSON.stringify(a)}}))};return b}(c("MViewportTracking"));g["default"]=a}),98);
__d("MemoryUtils",[],(function(a,b,c,d,e,f){"use strict";function g(){return window.performance&&window.performance.memory}function a(){return window.performance&&typeof window.performance.measureUserAgentSpecificMemory==="function"}function b(){if(g()){typeof window.gc==="function"&&window.gc();var a=window.performance.memory;return{usedJSHeapSize:a.usedJSHeapSize}}return{usedJSHeapSize:null}}f.isMemoryAPISupported=g;f.isMeasureMemoryOriginTrialSupported=a;f.getCurrentMemory=b}),66);
__d("prepareURIForWebInfraLogging",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=new(h||(h=c("URI")))(a);var b=a.getQueryData();b=b.ref;return a.setFragment("").setQueryData({ref:b})}g["default"]=a}),98);
__d("MemoryLoggerBase",["CurrentUser","MemoryLoggerConfigWebSitevarConfig","MemoryUtils","ODS","Promise","PromiseMonitor","gkx","ifRequired","performanceNow","prepareURIForWebInfraLogging","promiseDone","requireDeferred","requireWeak","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h,i,j,k=c("requireDeferred")("LogWebMemoryUsageFalcoEvent").__setRef("MemoryLoggerBase"),l,m,n;c("requireWeak")("AdsAccountStore",function(a){l=a});c("requireWeak")("PolarisConfig",function(a){m=a});c("requireWeak")("BarcelonaCurrentUser",function(a){n=a});var o=c("CurrentUser").getAppID(),p=c("MemoryLoggerConfigWebSitevarConfig").measurement_interval_minutes*60*1e3,q=10*1e3,r=c("MemoryLoggerConfigWebSitevarConfig").quick_measurement_interval_seconds*1e3,s=1e3,t=200,u,v=-1,w=-1,x=-1,y=-1,z=null,A=-1,B=null,C=-1,D=-1,E=[];function F(){return(j||(j=b("Promise"))).resolve().then(function(){var a=d("MemoryUtils").getCurrentMemory();a=(a=a.usedJSHeapSize)!=null?a:-1;D=Math.max(a,D);E.push({timestamp:Date.now(),jsHeapSize:a});E.length>t&&E.shift()})}function G(){B||c("ifRequired")("InteractionTracingMetrics",function(a){B=a.getInteractionStat()})}function H(){B||G();return B?B.interactionCount:0}var I=c("gkx")("5525")?function(){C<0&&c("ifRequired")("AdsAccountInsightsStore",function(a){a=a.getLastThirtyDaysSpend().getValue();a!=null&&(C=a)});return C}:function(){return-1},J=c("gkx")("5525")?function(){var a;return(a=(a=l)==null?void 0:a.getSelectedAccountID())!=null?a:"0"}:function(){return"0"},K=c("gkx")("9689")?function(){var a;return(a=(a=(a=m)==null?void 0:a.getViewerIdOrZero())!=null?a:(a=n)==null?void 0:a.getViewerID())!=null?a:"0"}:function(){return"0"};function L(a,b){return Math.max(b,-Math.log(Math.random())*a)}function M(a,b,d){var e=L(b,d);c("setTimeoutAcrossTransitions")(function(){c("promiseDone")(a(),function(){M(a,b,d)})},e)}function N(){var a=c("prepareURIForWebInfraLogging")(document.URL),e=d("MemoryUtils").getCurrentMemory(),f=e.usedJSHeapSize,g=null;return(j||(j=b("Promise"))).resolve().then(function(){if(d("MemoryUtils").isMeasureMemoryOriginTrialSupported())return window.performance.measureUserAgentSpecificMemory().then(function(a){g=a.bytes})}).then(function(){var b=null,e=null,h=URL._fbRegisteredObjectURL;if(typeof h==="function"){h=h();b=h.length;e=0;for(var j=0;j<h.length;j++){var l=h[j];l.type==="Blob"&&(e=(e||0)+l.size)}}l=(i||(i=c("performanceNow")))();var m=Math.round(l/(1e3*60)),n=H(),p=I(),q=J(),r=K(),s=d("PromiseMonitor").getUnresolvedPromiseCount();k.onReady(function(c){c.log(function(){var c;return{app_id:o,accurate_js_heap_size:g!=null?String(g):null,previous_uri:(c=z)==null?void 0:c.toString(),unrevoked_url_count:b!=null?String(b):null,unrevoked_memory_blob:e!=null?String(e):null,current_uri:a.toString(),minute:String(m),previous_used_js_heap_size:String(A),used_js_heap_size:String(f),peak_used_js_heap_size:String(D),navigation_count:String(v),news_feed_count:String(w),news_feed_story_position:String(x),news_feed_story_position_offset:String(y),ad_spend_30:String(p),interaction_count:String(n),script_path:u,ad_account_id:String(q),ig_user_id:String(r),unresolved_promise_count:String(s)}})})})}a={init:function(a){u=a.scriptPath;if(p<=0)return;if(d("MemoryUtils").isMemoryAPISupported()){a=d("MemoryUtils").isMeasureMemoryOriginTrialSupported()?"experimental":"hit";(h||(h=d("ODS"))).bumpEntityKey(2966,"browser_memory_logger",a);M(N,p,q);c("gkx")("9343")&&M(F,r,s)}else(h||(h=d("ODS"))).bumpEntityKey(2966,"browser_memory_logger","miss")},setNavigationCount:function(a){v=a},setNewsFeedCount:function(a){w=a},setNewsFeedStoryPosition:function(a){x=a},setNewsFeedStoryPositionOffset:function(a){y=a},setPreviousUri:function(a){z=c("prepareURIForWebInfraLogging")(a)},setPreviousUsedJSHeapSize:function(a){A=a},setScriptPath:function(a){u=a},getCurrentUsedJSHeapSize:function(){var a=d("MemoryUtils").getCurrentMemory();return(a=a.usedJSHeapSize)!=null?a:-1},getPeakUsedJSHeapSize:function(){return D},getQuickUsedJSHeapSizeSamples:function(){return[].concat(E)}};e=a;g["default"]=e}),98);
__d("MemoryLogger",["MemoryLoggerBase","NavigationMetrics","ScriptPath"],(function(a,b,c,d,e,f,g){var h=!1,i=0;a={init:function(a){var b=this;if(h)return;h=!0;c("MemoryLoggerBase").init({scriptPath:d("ScriptPath").getScriptPath()});d("ScriptPath").subscribe(function(){c("MemoryLoggerBase").setScriptPath(d("ScriptPath").getScriptPath())});c("NavigationMetrics").addListener(c("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){b.incrementNavigationCount(i)})},setPreviousUri:function(a){c("MemoryLoggerBase").setPreviousUri(a)},incrementNavigationCount:function(){c("MemoryLoggerBase").setNavigationCount(++i)},getQuickUsedJSHeapSizeSamples:function(){return c("MemoryLoggerBase").getQuickUsedJSHeapSizeSamples()}};b=a;g["default"]=b}),98);
__d("MLogging",["MLogState","MemoryLogger","Stratcom","gkx"],(function(a,b,c,d,e,f,g){var h=!1,i=document.URL;a=function(a){c("MLogState").setRefid(a.refid),!h&&c("gkx")("148")&&(c("MemoryLogger")==null?void 0:c("MemoryLogger").init({}),c("Stratcom").listen("history:change",null,function(){c("MemoryLogger").setPreviousUri(i),i=document.URL,c("MemoryLogger").incrementNavigationCount()}),h=!0)};g.main=a}),34);
__d("LOXUpsellType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LOGIN:"login_upsell",OPEN_APP:"open_app_upsell",RELATED_CONTENT:"related_content",QUICK_SHARE:"quick_share",SAVED_ACCOUNTS:"saved_accounts_upsell",UPSELL_TRIGGER:"upsell_trigger"});c=a;f["default"]=c}),66);
__d("LoxUpsellEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5835");b=d("FalcoLoggerInternal").create("lox_upsell_event",a);e=b;g["default"]=e}),98);
__d("LoxMtouchUpsellBannerTrigger",["cx","Event","LoxUpsellEventFalcoEvent"],(function(a,b,c,d,e,f,g,h){function a(a,b,d){var e={event:"upsell_banner_impression",impression_id:a,url:b,referring_surface:d,upsell_type:"login_upsell",surface:"unknown",location:"bottom_sheet","interface":"mtouch"};c("LoxUpsellEventFalcoEvent").log(function(){return e})}function b(a,b,d,e){c("Event").listen(a,"click",function(){var a={event:"register_button_clicked",impression_id:b,url:d,referring_surface:e,upsell_type:"login_upsell",surface:"unknown",location:"bottom_sheet","interface":"mtouch"};c("LoxUpsellEventFalcoEvent").log(function(){return a})})}function d(a,b,d,e){c("Event").listen(a,"click",function(){var f={event:"login_button_clicked",impression_id:b,url:d,referring_surface:e,upsell_type:i(a),surface:"unknown",location:"bottom_sheet","interface":"mtouch"};c("LoxUpsellEventFalcoEvent").log(function(){return f})})}function e(a,b,d,e){c("Event").listen(a,"click",function(){var a={event:"open_app_button_clicked",impression_id:b,url:d,referring_surface:e,upsell_type:"open_app_upsell",surface:"unknown",location:"bottom_sheet","interface":"mtouch"};c("LoxUpsellEventFalcoEvent").log(function(){return a})})}function i(a){a=a.classList.contains("_ai9t");return a?"open_app_upsell":"login_upsell"}g.upsellImpression=a;g.listenRegisterButton=b;g.listenLoginButton=d;g.listenOpenAppButton=e}),98);
__d("MTimeSpentDebug",["GeneratedLoggerUtils","ScriptPath"],(function(a,b,c,d,e,f,g){var h="logger:MDebugTimeSpentLoggerConfig",i={signal:!0,retry:!0},j=0;function a(a){if(a>=j&&a-j<1e3)return;var b={activity_time_ms:a,last_activity_time_ms:j,script_path:d("ScriptPath").getTopViewEndpoint()};d("GeneratedLoggerUtils").log(h,b,i);j=Math.floor(a/1e3)*1e3}g.report=a}),98);
__d("TimeSpentArray",["Banzai","TimeSlice","clearTimeout","pageID","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=2,i=h*32,j,k,l,m,n,o,p,q,r,s,t={},u;function v(){return{timeoutDelayMap:t,nextDelay:u,timeoutInSeconds:m}}function w(){if(j){var a=Date.now();a>o&&(q=Math.min(i,Math.ceil(a/1e3-n)));a=B();a&&j(a,u)}A()}function x(){y(),l=c("setTimeoutAcrossTransitions")(c("TimeSlice").guard(w,"TimeSpentArray Timeout",{propagationType:c("TimeSlice").PropagationType.ORPHAN}),m*1e3)}function y(){l&&(c("clearTimeout")(l),l=null)}function z(a){n=a;o=n*1e3;p=[1];for(a=1;a<h;a++)p.push(0);q=1;r+=1;s+=1;a=s.toString()+"_delay";u=t[a];u===void 0&&(u=t.delay);a=s.toString()+"_timeout";a=t[a];a===void 0&&(a=t.timeout);a=Math.min(a,i);m=a||i;x()}function A(){y(),p=null}function B(){return!p?null:{tos_id:c("pageID"),start_time:n,tos_array:p.slice(0),tos_len:q,tos_seq:s,tos_cum:r}}function C(a){if(a>=o&&a-o<1e3)return;k&&k(a);D(Math.floor(a/1e3))}function D(a){var b=a-n;(b<0||b>=i)&&w();!p?z(a):(p[b>>5]|=1<<(b&31),q=b+1,r+=1,o=a*1e3)}function a(a,b,d,e){r=0,s=-1,j=a,k=e,typeof b==="object"&&b!==null?t=b:t={},z(Math.floor((d===void 0||d===null||d===0?Date.now():d)/1e3)),c("Banzai").subscribe(c("Banzai").SHUTDOWN,w)}function b(a){C(a)}function d(){return B()}function e(){w()}function f(){A()}function E(){return v()}g.init=a;g.update=b;g.get=d;g.ship=e;g.reset=f;g.testState=E}),98);
__d("WebImmediateActiveSecondsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1843988");b=d("FalcoLoggerInternal").create("web_immediate_active_seconds",a);e=b;g["default"]=e}),98);
__d("TimeSpentImmediateActiveSecondsLoggerBlue",["ImmediateActiveSecondsConfig","ScriptPath","WebImmediateActiveSecondsFalcoEvent"],(function(a,b,c,d,e,f,g){var h=0;function i(a){if(c("ImmediateActiveSecondsConfig").sampling_rate<=0)return!1;a=Math.floor(a/1e3)%c("ImmediateActiveSecondsConfig").sampling_rate;return a===c("ImmediateActiveSecondsConfig").ias_bucket}function a(a){if(a>=h&&a-h<1e3)return;i(a)&&c("WebImmediateActiveSecondsFalcoEvent").logImmediately(function(){return{activity_time_ms:a,last_activity_time_ms:h,script_path:c("ScriptPath").getTopViewEndpoint()}});h=Math.floor(a/1e3)*1e3}f.exports={maybeReportActiveSecond:a}}),34);
__d("TimeSpentImmediateActiveSecondsLogger",["TimeSpentImmediateActiveSecondsLoggerBlue"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("TimeSpentImmediateActiveSecondsLoggerBlue")}),98);
__d("WebTimeSpentBitArrayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1829320");b=d("FalcoLoggerInternal").create("web_time_spent_bit_array",a);e=b;g["default"]=e}),98);
__d("MTimeSpentBitArrayLogger",["MTimeSpentDebug","ODS","Stratcom","TimeSpentArray","TimeSpentImmediateActiveSecondsLogger","Visibility","WebTimeSpentBitArrayFalcoEvent","isInIframe"],(function(a,b,c,d,e,f,g){var h;function i(){d("TimeSpentArray").ship()}function j(){var a=Date.now();d("TimeSpentArray").update(a);c("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(a);n&&d("MTimeSpentDebug").report(a)}function k(a){a._m="1",c("WebTimeSpentBitArrayFalcoEvent").logImmediately(function(){return{start_time:a.start_time,tos_array:a.tos_array,tos_cum:a.tos_cum,tos_id:a.tos_id,tos_len:a.tos_len,tos_seq:a.tos_seq,_m:"1"}})}function l(){return["gesturestart","mousedown","touchstart","scroll","keydown"]}function m(){var a=l();c("Stratcom").listen(a,null,j);a="onpagehide"in window?["pagehide","blur"]:["blur"];c("Stratcom").listen(a,null,i);c("Visibility").addListener("hidden",i)}var n=!1;function a(a,b){if(c("isInIframe")())return;n=!!b;b=Date.now();d("TimeSpentArray").init(k,null,b);m();c("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(b);n&&d("MTimeSpentDebug").report(b);(h||(h=d("ODS"))).bumpEntityKey(223,"ms.time_spent.qa."+a,"time_spent.bits.js_initialized")}g.getMonitoredEvents=l;g.init=a}),98);
__d("MLiteInit",["Kite","WebLite"],(function(a,b,c,d,e,f,g){function a(){d("WebLite").init(),d("Kite").init()}g.init=a}),98);
__d("IntlCLDRNumberType01",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType02",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0||a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType03",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0||a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType04",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a>=0&&a<=1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType09",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType34",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0)return c("IntlVariations").NUMBER_ZERO;else if(a===1)return c("IntlVariations").NUMBER_ONE;else if(a===2)return c("IntlVariations").NUMBER_TWO;else if(a%100>=3&&a%100<=10)return c("IntlVariations").NUMBER_FEW;else if(a%100>=11&&a%100<=99)return c("IntlVariations").NUMBER_MANY;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("WebBlueTimeSpentNavigationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1829319");b=d("FalcoLoggerInternal").create("web_blue_time_spent_navigation",a);e=b;g["default"]=e}),98);
__d("ScriptPathLogger",["Banzai","LogHistory","ScriptPath","URI","WebBlueTimeSpentNavigationFalcoEvent","WebSession","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h;f="script_path_change";var i={scriptPath:null,categoryToken:null,extraData:{}},j=!1,k="imp_id";function l(a){var b=(h||(h=c("URI"))).getNextURI?(h||(h=c("URI"))).getNextURI():new(h||(h=c("URI")))(window.location.href),d=b.getQueryData();b=b.getPath();b.endsWith("index.html")&&(b=b.substr(0,b.length-1));d.comment_id&&(a.extra_data=babelHelpers["extends"]({},a.extra_data,{graphql_comment_id:d.comment_id}));var e=m(b,d);if(e){a.content_id=e;return}e=n(b);if(e!==""){a.dest_topic_feed=e;return}if(o(b)){e=d.queue_id;e&&(a.dest_srt_queue_id=e);b=d.job_in_review;b&&(a.dest_srt_reviewing_job_id=b);return}}function m(a,b){if(b.story_fbid)return b.story_fbid;if(b.fbid)return b.fbid;if(b.view==="permalink"&&b.id)return b.id;b=/\/(posts|videos|notes|groups\/.*\/permalink)\//;var c=/^[0-9]+$/;if(b.test(a)){b=a.split("index.html");a=b[b.length-1];if(c.test(a))return a}return""}function n(a){if(!a||a.search("feed/topics/index.html")==-1)return"";a=a.split("index.html");return a[a.length-1]}function o(a){return!!a&&a.search("intern/review/index.html")!==-1}function p(a,b,e,f){d("WebSession").extend();if(!j||c("isInIframe")())return;var g={source_path:a.scriptPath,source_token:a.categoryToken,dest_path:b.scriptPath,dest_token:b.categoryToken,impression_id:b.extraData?b.extraData.imp_id:null,cause:e,sid_raw:d("WebSession").getId()};e=e==="unload";e||l(g);if(f!=null){var h=f.snowlift_content_id;!e&&h!=null&&(g.content_id=h,delete f.snowlift_content_id);g.extra_data=babelHelpers["extends"]({},g.extra_data,f)}a.scriptPath===null&&(g.referrer=document.referrer);e=d("ScriptPath").getClickPointInfo();e&&(g.click_point_info=e);if(a.extraData)for(h in a.extraData)h!=k&&(g["source_"+h]=a.extraData[h]);if(b.extraData)for(f in b.extraData)f!=k&&(g["dest_"+f]=b.extraData[f]);a.topViewEndpoint&&(g.source_endpoint=a.topViewEndpoint);b.topViewEndpoint&&(g.dest_endpoint=b.topViewEndpoint);a.restored&&(g.source_restored=!0);c("WebBlueTimeSpentNavigationFalcoEvent").logImmediately(function(){return{json_data:JSON.stringify(g)}});d("ScriptPath").setClickPointInfo(null)}function q(){p(d("ScriptPath").getSourcePageInfo()||i,d("ScriptPath").getPageInfo()||i,"load")}function r(a,b,c){p(a,b,"transition",c)}function a(){p(d("ScriptPath").getPageInfo()||i,i,"unload"),d("ScriptPath").shutdown()}var s=d("ScriptPath").subscribe(function(a){if(j){var b=a.source,c=a.dest,d=a.cause;a=a.extraData;d?p(b||i,c||i,d,a):b?r(b,c||i,a):q()}});c("Banzai").subscribe(c("Banzai").SHUTDOWN,a);function b(){j=!0,d("ScriptPath").getPageInfo()&&q()}function e(){j=!1,s.remove()}g.BANZAI_LOGGING_ROUTE=f;g.startLogging=b;g.stopLogging=e}),98);